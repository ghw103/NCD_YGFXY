/***************************************************************************************************
*FileName:	Intent
*Description:	页面之间传递消息
*Author: xsx_kair
*Data:	2016年12月21日14:09:11
***************************************************************************************************/

/***************************************************************************************************/
/******************************************Header List********************************************/
/***************************************************************************************************/
#include	"Intent.h"

#include	"MyMem.h"

#include	<string.h>
#include	"stdio.h"
#include 	"stdlib.h"
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/
/****************************************File Start*************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/***************************************************************************************************
*FunctionName: createIntent
*Description: 创建消息
*Input: 
*Output: 
*Return: 
*Author: xsx
*Date: 2016年12月21日14:21:12
***************************************************************************************************/
Intent * createIntent(void * data, unsigned short datalen)
{
	Intent * intent = NULL;
	
	if(NULL == data)
		return NULL;
	
	intent = MyMalloc(sizeof(Intent));
	
	if(intent)
	{
		memset(intent, 0, sizeof(Intent));
		
		intent->data = MyMalloc(datalen);
		intent->datalen = datalen;
		
		if(intent->data)
			memcpy(intent->data, data, datalen);

		else
		{
			MyFree(intent);
			intent = NULL;
		}
	}
	
	return intent;
}

/***************************************************************************************************
*FunctionName: readIntent
*Description: 读取消息
*Input: 
*Output: 
*Return: 
*Author: xsx
*Date: 2016年12月21日14:24:39
***************************************************************************************************/
void readIntent(Intent * intent, void * data, unsigned short datalen)
{
	if((NULL == intent) || (NULL == data))
		return;
	
	if(datalen > intent->datalen)
		datalen = intent->datalen;
	
	memcpy(data, intent->data, datalen);
	
	MyFree(intent->data);
	MyFree(intent);
}
/****************************************end of file************************************************/
